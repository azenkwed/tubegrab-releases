<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TubeGrab - Fast YouTube Downloads</title>
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/favicon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/favicon-512.png">
    <link rel="stylesheet" href="site.css">
  </head>
  <body>
    <div class="bg" aria-hidden="true"></div>
    <header class="topbar">
      <div class="brand">
        <span class="dot"></span>
        <span>TubeGrab</span>
      </div>
      <nav class="nav">
        <a href="#download">Download</a>
        <a href="#compare">Compare</a>
        <a href="#features">Features</a>
        <a href="#install">Install</a>
      </nav>
    </header>

    <main class="hero">
      <div class="hero-content">
        <div class="pill">
          Latest version
          <span class="version" data-version="v0.4.19">v0.4.19</span>
        </div>
        <h1>Grab it. Clean.</h1>
        <p>
          TubeGrab is a modern desktop app for downloading audio or video from
          YouTube and YouTube Music with a fast, no-nonsense workflow.
        </p>
        <div class="cta">
          <a class="btn primary" href="https://github.com/azenkwed/tubegrab-releases/releases/latest" id="download">
            Download latest release
          </a>
          <a class="btn donate" href="https://ko-fi.com/azenkwed">
            Donate
          </a>
        </div>
        <div class="edition-select">
          <span>Choose edition:</span>
          <div class="edition-toggle" role="group" aria-label="Choose edition">
            <button class="edition-option is-active" type="button" data-edition="lite" aria-pressed="true">
              Lite
            </button>
            <button class="edition-option" type="button" data-edition="pro" aria-pressed="false">
              Pro
            </button>
          </div>
        </div>
        <div class="download-note" id="download-note">
          Auto-selecting the best download for your device.
        </div>
        <div class="platforms">
          <span>Windows</span>
          <span>macOS</span>
          <span>Linux</span>
        </div>
      </div>
      <div class="hero-card">
        <div class="card-header">Quick flow</div>
        <ol>
          <li>Paste a YouTube or YouTube Music link.</li>
          <li>Pick a folder and format.</li>
          <li>Download with clean metadata.</li>
        </ol>
      </div>
    </main>

    <section class="section" id="features">
      <h2>Built for a clean download experience</h2>
      <div class="grid">
        <div class="card">
          <h3>Audio or video</h3>
          <p>Choose mp3, m4a, or opus for audio, or mp4 and mkv for video.</p>
        </div>
        <div class="card">
          <h3>Smart defaults</h3>
          <p>Automatic presets for YouTube and YouTube Music URLs.</p>
        </div>
        <div class="card">
          <h3>Metadata ready</h3>
          <p>Optional metadata and thumbnail embedding with clean tags.</p>
        </div>
      </div>
    </section>

    <section class="section" id="compare">
      <h2>Lite vs Pro</h2>
      <p class="section-sub">
        Lite covers the core workflow. Pro adds authentication and speed tools for private or large playlists.
      </p>
      <div class="table-wrap">
        <table class="compare-table">
          <thead>
            <tr>
              <th>Feature</th>
              <th>Lite</th>
              <th class="col-pro">Pro</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="feature">Audio + video downloads</td>
              <td>Yes</td>
              <td class="col-pro">Yes</td>
            </tr>
            <tr>
              <td class="feature">Playlist downloads</td>
              <td>Yes</td>
              <td class="col-pro">Yes</td>
            </tr>
            <tr>
              <td class="feature">Playlist subfolders</td>
              <td>Yes</td>
              <td class="col-pro">Yes</td>
            </tr>
            <tr>
              <td class="feature">Embed metadata + thumbnails</td>
              <td>Yes</td>
              <td class="col-pro">Yes</td>
            </tr>
            <tr>
              <td class="feature">Cookies for private playlists</td>
              <td>No</td>
              <td class="col-pro">Yes</td>
            </tr>
            <tr>
              <td class="feature">JS runtime for signature solving</td>
              <td>No</td>
              <td class="col-pro">Yes</td>
            </tr>
            <tr>
              <td class="feature">Lazy playlist (start faster)</td>
              <td>No</td>
              <td class="col-pro">Yes</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="section" id="install">
      <h2>Install in minutes</h2>
      <div class="grid">
        <div class="card">
          <h3>Windows</h3>
          <p>Run <strong>TubeGrab-Lite-&lt;version&gt;.exe</strong> or <strong>TubeGrab-Pro-&lt;version&gt;.exe</strong> and follow the prompts.</p>
        </div>
        <div class="card">
          <h3>macOS</h3>
          <p>Open the Lite/Pro DMG (arm64 only: M1/M2/M3/M4) and drag TubeGrab into Applications.</p>
        </div>
        <div class="card">
          <h3>Linux</h3>
          <p>Mark the Lite/Pro AppImage executable and run it.</p>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div>
        Need help? Read the
        <a href="USER_MANUAL.pdf" download>user manual (PDF)</a>.
      </div>
      <div>
        Support TubeGrab:
        <a href="https://ko-fi.com/azenkwed">ko-fi.com/azenkwed</a>
      </div>
    </footer>
    <script>
      (function () {
        const download = document.getElementById("download");
        const note = document.getElementById("download-note");
        const editionButtons = Array.from(document.querySelectorAll(".edition-option"));
        if (!download) {
          return;
        }
        const repo = "azenkwed/tubegrab-releases";
        const os = navigator.platform || navigator.userAgent || "";
        const isMac = /Mac|iPhone|iPad|iPod/i.test(os);
        const isWindows = /Win/i.test(os);
        const isLinux = /Linux/i.test(os);
        const platformLabel = isWindows ? "Windows" : isMac ? "macOS" : isLinux ? "Linux" : "";
        const desiredExt = isWindows ? ".exe" : isMac ? ".dmg" : isLinux ? ".AppImage" : "";
        let selectedEdition = "lite";
        let assetsCache = null;

        const editionLabel = () => (selectedEdition === "pro" ? "Pro" : "Lite");
        const releaseUrl = "https://github.com/azenkwed/tubegrab-releases/releases/latest";

        const setNote = (message) => {
          if (note) {
            note.textContent = message;
          }
        };

        const updateButtonLabel = () => {
          const label = platformLabel
            ? `Download ${editionLabel()} for ${platformLabel}`
            : `Download ${editionLabel()} release`;
          download.textContent = label;
        };

        const updateSelection = (edition) => {
          selectedEdition = edition === "pro" ? "pro" : "lite";
          editionButtons.forEach((button) => {
            const active = button.dataset.edition === selectedEdition;
            button.classList.toggle("is-active", active);
            button.setAttribute("aria-pressed", active ? "true" : "false");
          });
          updateButtonLabel();
          setNote(`Selected: ${editionLabel()}. Auto-selecting the best download for your device.`);
          updateDownloadLink();
        };

        const updateDownloadLink = () => {
          if (!desiredExt || !assetsCache) {
            download.href = releaseUrl;
            return;
          }
          const prefix = `TubeGrab-${editionLabel()}-`;
          const asset = assetsCache.find(
            (item) => item.name && item.name.startsWith(prefix) && item.name.endsWith(desiredExt)
          );
          if (asset && asset.browser_download_url) {
            download.href = asset.browser_download_url;
            setNote(`Direct download (${asset.name})`);
            return;
          }
          download.href = releaseUrl;
          setNote("Direct download unavailable. Using latest releases page.");
        };

        updateButtonLabel();
        setNote(`Selected: ${editionLabel()}. Auto-selecting the best download for your device.`);

        editionButtons.forEach((button) => {
          button.addEventListener("click", () => updateSelection(button.dataset.edition));
        });

        fetch(`https://api.github.com/repos/${repo}/releases/latest`)
          .then((res) => (res.ok ? res.json() : Promise.reject(res.status)))
          .then((data) => {
            if (!data || !data.assets) {
              return;
            }
            assetsCache = data.assets;
            updateDownloadLink();
          })
          .catch(() => {
            setNote("Direct download unavailable. Using latest releases page.");
          });
      })();
    </script>
  </body>
</html>
